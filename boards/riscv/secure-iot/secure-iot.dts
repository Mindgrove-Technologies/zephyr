/dts-v1/;

#include <secure-iot/riscv64-secure-iot.dtsi>

/ {
	model = "shakti,spike-bare";
	compatible = "shakti,spike-bare-dev";

chosen {
		zephyr,console = &uart0;
		zephyr,display = &gc9x01_display;
		zephyr,flash = &qspi0;
	};
};

&uart0 {
	status = "okay";
	base = <0x11300>;
	current-speed = <115200>;
	clock-frequency = <100000000>;
};

&uart1 {
	status = "okay";
	base = <0x11400>;
	current-speed = <115200>;
	clock-frequency = <100000000>;
};

&i2c0 {
	status = "ok";
	base = <0x44000>;
	clock_frequency = <40000000>;
	scl_frequency = <100000>;
};
&i2c1 {
	status = "ok";
	base = <0x44100>;
	clock_frequency = <40000000>;
	scl_frequency = <100000>;
};
&spi0 {
		status = "okay";
		sclk_configure = <0x0 0x0 0x10 0x0 0x0>;
        comm_configure = <0x01 0x00 0x03 0x08>;
		clock-frequency = <10000000>;
        cs-gpios = <&gpio0 10 0>;

};

&spi1 {
		status = "okay";
		sclk_configure = <0x0 0x0 0x10 0x0 0x0>;
        comm_configure = <0x01 0x00 0x03 0x08>;
		clock-frequency = <10000000>;
        cs-gpios = <&gpio0 3 GPIO_ACTIVE_HIGH>;

        gc9x01_display: gc9x01x@0 {
          compatible = "galaxycore,gc9x01x";
          reg = <0>;
          spi-max-frequency = <2000000>;
          cmd-data-gpios = <&gpio0 2 GPIO_ACTIVE_HIGH>;
          reset-gpios = <&gpio0 1 GPIO_ACTIVE_LOW>;
          pixel-format = <16>;
          width = <240>;
          height = <240>;
		  display-inversion;
        };
};

&gpio0 {
	status = "okay";
};

&plic {

	status = "okay";
	base = <0xc000000>;
};

&qspi0 {
	status = "okay";
	flash0@90000200 {
        compatible = "winbond,nor-flash";  /* Update with specific flash part number "winbond,w25q<id> nor-flash is generic" */
        reg = <0x00000000 0x90000200 0x10000>;  /* Base address 0x90000000, size 512MB (0x20000000) */
        spi-max-frequency = <60000000>;  /* Maximum SPI frequency */
        flash-size = <0x10000>;  /* Size of the flash in bytes (512MB = 0x20000000) */
        status = "okay";  /* Enable the NOR flash device */
        label = "nor_flash";  /* Arbitrary label for identification */
		bus-width = <4>;
    };
};

&qspi1 {
	status = "okay";
};
